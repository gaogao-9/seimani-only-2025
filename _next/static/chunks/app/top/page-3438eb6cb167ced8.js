(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58],{1607:(n,t,e)=>{Promise.resolve().then(e.bind(e,8252))},8252:(n,t,e)=>{"use strict";e.d(t,{default:()=>nA});var r=e(5933),i=e(5155),a=e(130),o=e(2115),s=e(4052),h=e.n(s);function u(){let n=(0,r._)(["\n  position: relative;\n  overflow: hidden;\n  transform-style: preserve-3d;\n  width: ",";\n  width: ",";\n  height: ",";\n  height: ",";\n"]);return u=function(){return n},n}function c(){let n=(0,r._)(["\n  width: 100%;\n  height: 100%;\n  transition: transform 0.45s ease;\n  transform-origin: left top;\n  transform-style: inherit;\n  backface-visibility: hidden;\n"]);return c=function(){return n},n}function l(){let n=(0,r._)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-image: url(",");\n  background-size: contain;\n  background-position: center center;\n  background-repeat: no-repeat;\n  backface-visibility: hidden;\n\n  @media (min-aspect-ratio: 1/1) and (max-height: 720px) {\n    background-image: url(",");\n  }\n  @media (max-aspect-ratio: 1/1) and (max-width: 720px) {\n    background-image: url(",");\n  }\n"]);return l=function(){return n},n}let d=a.A.div(u(),n=>{let{width:t}=n;return Array.isArray(t)?t[0]:t},n=>{let{width:t}=n;return Array.isArray(t)?t[1]:t},n=>{let{height:t}=n;return Array.isArray(t)?t[0]:t},n=>{let{height:t}=n;return Array.isArray(t)?t[1]:t}),f=a.A.div(c()),g=n=>{switch(n){case"left":return 0;case"center":return .5;case"right":return 1;default:return n}},m=n=>{switch(n){case"top":return 0;case"center":return .5;case"bottom":return 1;default:return n}},w=n=>{let{rectWidth:t,rectHeight:e,imageWidth:r,imageHeight:a,minimumHeightThretholdRate:s,minimumWidthThretholdRate:u,landscapePositionX:c,landscapePositionY:l,portraitPositionX:w,portraitPositionY:p,children:x,onResize:y,...b}=n,_=(0,o.useRef)(null),[j,v]=(0,o.useState)({w:0,h:0}),k=(0,o.useMemo)(()=>({w:r,h:a}),[r,a]),A=(0,o.useCallback)(n=>{let[{contentRect:t}]=n;v({w:t.width,h:t.height}),null==y||y({w:t.width,h:t.height})},[y]),M=(0,o.useMemo)(()=>h()(A,50),[A]);(0,o.useEffect)(()=>{if(null===_.current)return;let n=_.current,t=new ResizeObserver(M);return A([{contentRect:n.getBoundingClientRect()}]),t.observe(n),()=>{t.unobserve(n)}},[A,M]);let Y=(0,o.useMemo)(()=>{let n=k.w/k.h,t=j.w/j.h;return t>n?{x:j.h*Math.min(t,s)/n/k.h,y:j.h*Math.min(t,s)/k.w}:{x:j.w/Math.max(t,u)/k.h,y:j.w/Math.max(t,u)*n/k.w}},[j.w,j.h,k.h,k.w,s,u]),N=(0,o.useMemo)(()=>g(c),[c]),R=(0,o.useMemo)(()=>m(l),[l]),F=(0,o.useMemo)(()=>g(w),[w]),P=(0,o.useMemo)(()=>m(p),[p]),C=(0,o.useMemo)(()=>{let n=k.w/k.h,t=j.w/j.h;return t>n?{x:j.w*(1-Math.min(t,s)/t)*N,y:j.h*(1-Math.min(t,s)/n)*R}:{x:j.w*(1-n/Math.max(t,u))*F,y:j.h*(1-t/Math.max(t,u))*P}},[j.w,j.h,k.h,k.w,s,u,N,R,F,P]),H=(0,o.useMemo)(()=>({transform:"translate(".concat(!Number.isNaN(C.x)?C.x:0,"px, ").concat(!Number.isNaN(C.y)?C.y:0,"px) scale(").concat(!Number.isNaN(Y.x)?Y.x:0,", ").concat(Number.isNaN(Y.y)?0:Y.y,")")}),[Y.x,Y.y,C.x,C.y]);return(0,i.jsx)(d,{ref:_,width:t,height:e,...b,children:(0,i.jsx)(f,{style:H,children:x})})};a.A.div(l(),n=>{let{src:t}=n;return t},n=>{let{smallSrc:t}=n;return"".concat(t)},n=>{let{smallSrc:t}=n;return"".concat(t)});var p=e(6766),x=e(5702);function y(){let n=(0,r._)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: ",";\n  height: ",";\n  transform-origin: center center;\n  transform-style: preserve-3d;\n  animation-play-state: ",";\n"]);return y=function(){return n},n}let b=a.A.div(y(),n=>{let{width:t}=n;return t?"".concat(t,"px"):"100%"},n=>{let{height:t}=n;return t?"".concat(t,"px"):"100%"},n=>{let{playstate:t="running"}=n;return t});function _(){let n=(0,r._)([""]);return _=function(){return n},n}let j=x.Fr?{w:1200,h:850}:{w:3200,h:2266};(0,a.A)(b)(_());var v=e(3380);function k(){let n=(0,r._)(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]);return k=function(){return n},n}function A(){let n=(0,r._)(["\n  animation: 0.5s ease ","s 1 running both\n    ",";\n  transform-origin: center;\n"]);return A=function(){return n},n}let M=(0,v.i7)(k()),Y=x.Fr?{w:1200,h:850}:{w:3200,h:2266},N=(0,a.A)(b)(A(),2.7,M),R=p.default;function F(){let n=(0,r._)(["\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n"]);return F=function(){return n},n}function P(){let n=(0,r._)(["\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  background-color: white;\n\n  animation: 0.5s ease ","s 1 paused both\n    ",";\n  transform-origin: center;\n\n  &.loaded {\n    animation-play-state: running;\n  }\n"]);return P=function(){return n},n}let C=(0,v.i7)(F()),H=a.A.div(P(),.3,C);var O=e(9821);function W(){let n=(0,r._)([""]);return W=function(){return n},n}let T=x.Fr?{w:1200,h:850}:{w:3200,h:2266},X=(0,a.A)(b)(W()),E=p.default;function L(){let n=(0,r._)(["\n  0% {\n    opacity: 0;\n    transform: translateY(20%);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0%);\n  }\n"]);return L=function(){return n},n}function S(){let n=(0,r._)(["\n  animation: 0.3s ease ","s 1 running both\n    ",";\n  transform-origin: center;\n"]);return S=function(){return n},n}let U=(0,v.i7)(L()),z=x.Fr?{w:1200,h:850}:{w:3200,h:2266},B=(0,a.A)(b)(S(),.7,U),I=p.default;function Z(){let n=(0,r._)(["\n  0% {\n    opacity: 0;\n    transform: translateY(20%);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0%);\n  }\n"]);return Z=function(){return n},n}function Q(){let n=(0,r._)(["\n  animation: 0.3s ease ","s 1 running both\n    ",";\n  transform-origin: center;\n"]);return Q=function(){return n},n}let V=(0,v.i7)(Z()),q=x.Fr?{w:1200,h:850}:{w:3200,h:2266},D=(0,a.A)(b)(Q(),.6,V),G=p.default;function J(){let n=(0,r._)(["\n  0% {\n    opacity: 0;\n    transform: translateY(-20%);\n  }\n  1% {\n    opacity: 1;\n    transform: translateY(-10%);\n  }\n  10% {\n    opacity: 1;\n    transform: translateY(-11%);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0%);\n  }\n"]);return J=function(){return n},n}function K(){let n=(0,r._)(["\n  animation: 0.7s ease ","s 1 running both ",";\n  transform-origin: center;\n"]);return K=function(){return n},n}let $=(0,v.i7)(J()),nn=x.Fr?{w:1200,h:850}:{w:3200,h:2266},nt=(0,a.A)(b)(K(),1.5,$),ne=p.default;function nr(){let n=(0,r._)(["\n  0% {\n    opacity: 0;\n    transform: translateY(-20%);\n  }\n  1% {\n    opacity: 1;\n    transform: translateY(-10%);\n  }\n  10% {\n    opacity: 1;\n    transform: translateY(-11%);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0%);\n  }\n"]);return nr=function(){return n},n}function ni(){let n=(0,r._)(["\n  animation: 0.7s ease ","s 1 running both ",";\n  transform-origin: center;\n"]);return ni=function(){return n},n}let na=(0,v.i7)(nr()),no=x.Fr?{w:1200,h:850}:{w:3200,h:2266},ns=(0,a.A)(b)(ni(),1.9,na),nh=p.default;function nu(){let n=(0,r._)(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]);return nu=function(){return n},n}function nc(){let n=(0,r._)(["\n  animation: 0.5s ease ","s 1 running both\n    ",";\n  transform-origin: center;\n"]);return nc=function(){return n},n}let nl=(0,v.i7)(nu()),nd=x.Fr?{w:1200,h:850}:{w:3200,h:2266},nf=(0,a.A)(b)(nc(),1,nl),ng=p.default;function nm(){let n=(0,r._)(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]);return nm=function(){return n},n}function nw(){let n=(0,r._)(["\n  animation: 0.5s ease ","s 1 running both ",";\n  transform-origin: center;\n"]);return nw=function(){return n},n}let np=(0,v.i7)(nm()),nx=x.Fr?{w:750,h:532}:{w:1500,h:1064},ny={w:.3*nx.w,h:.3*nx.h},nb=(0,a.A)(b)(nw(),2.7,np),n_=p.default,nj=n=>{let{position:t,offsetX:e,offsetY:r}=n;return"translate(".concat(nx.w*(("top"===t?.5:.85)+e)-ny.w/2,"px, ").concat(nx.h*(("top"===t?.18:.29)+r)-ny.h/2,"px)")};function nv(){let n=(0,r._)(["\n  display: grid;\n\n  [data-grid-area] {\n    grid-area: 1/1;\n  }\n"]);return nv=function(){return n},n}let nk=a.A.div(nv()),nA=()=>{let n=(0,O.lZ)(),[t,e]=(0,o.useState)("top"),[[r,a],s]=(0,o.useState)([0,0]),h=(0,o.useCallback)(n=>{let t=ny.w/ny.h,r=n.w/n.h,i=r>1.2?"right":"top";if(r<=1.2&&r>=t?s([0,-((r-t)/(1.2-t)*.12)]):"top"===i&&s([0,0]),console.log("right"===i&&r<=9,r,9),"right"===i&&r<=9){let n=(9-r)/7.8;s([-.1*n,-.03*n])}else"right"===i&&s([0,0]);e(r>1.2?"right":"top")},[]),u=(0,o.useMemo)(()=>({transform:nj({position:t,offsetX:r,offsetY:a})}),[t,r,a]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(nk,{children:[(0,i.jsx)(w,{rectWidth:"100%",rectHeight:["calc(100vh - 60px)","calc(100dvh - 60px)"],landscapePositionX:"center",landscapePositionY:.42,portraitPositionX:.32,portraitPositionY:"center",imageWidth:j.w,imageHeight:j.h,minimumHeightThretholdRate:8,minimumWidthThretholdRate:.4,"data-grid-area":"character",children:n.loaded&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(X,{width:T.w,height:T.h,children:(0,i.jsx)(E,{src:n.images["back.jpg"],width:T.w,height:T.h,alt:"背景画像"})}),(0,i.jsx)(ns,{width:no.w,height:no.h,children:(0,i.jsx)(nh,{src:n.images["puri.png"],width:no.w,height:no.h,alt:"プリミュラ"})}),(0,i.jsx)(B,{width:z.w,height:z.h,children:(0,i.jsx)(I,{src:n.images["back_snack.png"],width:z.w,height:z.h,alt:"背面お菓子画像"})}),(0,i.jsx)(nt,{width:nn.w,height:nn.h,children:(0,i.jsx)(ne,{src:n.images["rin.png"],width:nn.w,height:nn.h,alt:"リン"})}),(0,i.jsx)(D,{width:q.w,height:q.h,children:(0,i.jsx)(G,{src:n.images["front_snack.png"],width:q.w,height:q.h,alt:"前面お菓子画像"})}),(0,i.jsx)(N,{width:Y.w,height:Y.h,children:(0,i.jsx)(R,{src:n.images["eye.png"],width:Y.w,height:Y.h,alt:"目差分"})}),(0,i.jsx)(nf,{width:nd.w,height:nd.h,children:(0,i.jsx)(ng,{src:n.images["front.png"],width:nd.w,height:nd.h,alt:"最前面オブジェクト"})})]})}),(0,i.jsx)(w,{rectWidth:"100%",rectHeight:["calc(100vh - 60px)","calc(100dvh - 60px)"],landscapePositionX:.5,landscapePositionY:.2,portraitPositionX:.5,portraitPositionY:.5,imageWidth:nx.w,imageHeight:nx.h,minimumHeightThretholdRate:3.5,minimumWidthThretholdRate:.45,"data-grid-area":"logo",onResize:h,children:n.loaded&&(0,i.jsx)(nb,{width:nx.w,height:nx.h,children:(0,i.jsx)(n_,{src:n.images["logo.png"],width:ny.w,height:ny.h,style:u,alt:"ロゴ"})})}),(0,i.jsx)(H,{className:n.loaded?"loaded":""})]})})}},9821:(n,t,e)=>{"use strict";e.d(t,{uQ:()=>a,lZ:()=>o,gH:()=>s});var r=e(5702),i=e(2115);let{ImageContext:a,useImageContext:o,useImageContextValue:s}=((n,t)=>{let e=(0,i.createContext)(null);return{ImageContext:e,useImageContext:()=>(0,i.useContext)(e),useImageContextValue:()=>{let[e,r]=(0,i.useState)({loaded:!1,images:{},async init(){let i=(async()=>{let e={};for(let r of n){let n=new Blob([await fetch(t(r)).then(n=>n.arrayBuffer())],{type:"image/png"}),i=URL.createObjectURL(n);e[r]=i}return e})(),a=new Promise(n=>setTimeout(n,1e3)),[o]=await Promise.all([i,a]);r({...e,loaded:!0,images:o})},dispose(){for(let n of Object.values(e.images))URL.revokeObjectURL(n);r({...e,loaded:!1,images:{}})}});return e}}})(["back.jpg","rin.png","puri.png","front.png","front_snack.png","back_snack.png","eye.png","logo.png"],n=>"/assets/img/top/".concat(r.Fr?"m_":"").concat(n))}},n=>{var t=t=>n(n.s=t);n.O(0,[324,702,94,441,684,358],()=>t(1607)),_N_E=n.O()}]);